<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Naam Jap Counter</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --bg: linear-gradient(135deg,#ffdd55,#ffd000);
  --card: rgba(255,255,255,0.35);
  --text: #000;
  --accent: #000;
}

body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: var(--bg);
  color: var(--text);
  text-align: center;
  min-height: 100vh;
}

header {
  padding: 15px;
  font-size: 22px;
  font-weight: bold;
}

button {
  padding: 10px 16px;
  margin: 6px;
  border: none;
  border-radius: 10px;
  background: var(--accent);
  color: #fff;
  font-size: 14px;
  cursor: pointer;
}

.card {
  backdrop-filter: blur(10px);
  background: var(--card);
  margin: 15px;
  padding: 15px;
  border-radius: 16px;
}

.hidden { display:none; }

.circle {
  width: 220px;
  height: 220px;
  border-radius: 50%;
  border: 14px solid rgba(0,0,0,0.2);
  margin: 25px auto;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:42px;
  font-weight:bold;
  position:relative;
}

.circle::after {
  content:"";
  position:absolute;
  inset:0;
  border-radius:50%;
  border:14px solid var(--accent);
  transform:rotate(-90deg);
  stroke-dasharray:690;
  stroke-dashoffset:var(--fill,690);
}

.top-actions button {
  font-size:12px;
  padding:8px 10px;
}

input {
  padding:10px;
  border-radius:10px;
  border:none;
  width:70%;
  margin:10px 0;
}
</style>
</head>

<body>

<header id="appTitle">RADHARAMAN</header>

<!-- LOGIN -->
<div id="login" class="card">
  <h2>‡§®‡§æ‡§Æ ‡§ú‡§™ ‡§≤‡•â‡§ó‡§ø‡§®</h2>
  <input id="username" placeholder="Enter your name">
  <br>
  <button onclick="login()">Start Jap</button>
</div>

<!-- HOME -->
<div id="home" class="hidden card">
  <div class="top-actions">
    <button onclick="toggleLang()">üåê ‡§≠‡§æ‡§∑‡§æ</button>
    <button onclick="changeTheme()">üé® Theme</button>
  </div>

  <h2 id="selectText">‡§ú‡§™ ‡§ï‡§æ‡§â‡§Ç‡§ü‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç</h2>
  <button onclick="openCounter('radha')">‡§∞‡§æ‡§ß‡§æ</button>
  <button onclick="openCounter('mahadev')">‡§Æ‡§π‡§æ‡§¶‡•á‡§µ</button>
  <button onclick="openCounter('ram')">‡§∞‡§æ‡§Æ</button>
</div>

<!-- COUNTER -->
<div id="counter" class="hidden">

  <button onclick="goHome()">‚¨Ö Back</button>
  <h1 id="godName"></h1>

  <div class="circle" onclick="tap()" id="circle">
    <span id="count">0</span>
  </div>

  <div class="card" id="stats"></div>

  <div class="card">
    <strong id="activeLabel">Most Active Time</strong>
    <div id="activeTime"></div>
  </div>

</div>

<audio id="tapSound">
  <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQAAAAA=">
</audio>

<script>
let user="", god="", lang="hi";
let themes=[
  ["linear-gradient(135deg,#ffdd55,#ffd000)","#000"],
  ["linear-gradient(135deg,#111,#333)","#fff"],
  ["linear-gradient(135deg,#3db2ff,#6ee7ff)","#003"],
  ["linear-gradient(135deg,#ffb6c1,#ff6f91)","#400"]
];
let themeIndex=0;

function login(){
  user=document.getElementById("username").value.trim();
  if(!user) return alert("Enter name");
  localStorage.setItem("nj_user",user);
  document.getElementById("login").classList.add("hidden");
  document.getElementById("home").classList.remove("hidden");
}

window.onload=()=>{
  let u=localStorage.getItem("nj_user");
  if(u){ user=u; document.getElementById("login").classList.add("hidden"); document.getElementById("home").classList.remove("hidden"); }
};

function key(k){ return user+"_"+god+"_"+k; }

function openCounter(g){
  god=g;
  document.getElementById("home").classList.add("hidden");
  document.getElementById("counter").classList.remove("hidden");
  document.getElementById("godName").innerText=g.toUpperCase();
  update();
}

function goHome(){
  document.getElementById("counter").classList.add("hidden");
  document.getElementById("home").classList.remove("hidden");
}

function tap(){
  let t=+localStorage.getItem(key("total"))||0;
  t++; localStorage.setItem(key("total"),t);

  let d=new Date().toDateString();
  let td=JSON.parse(localStorage.getItem(key("day"))||"{}");
  td[d]=(td[d]||0)+1;
  localStorage.setItem(key("day"),JSON.stringify(td));

  let h=new Date().getHours();
  let hd=JSON.parse(localStorage.getItem(key("hour"))||"{}");
  hd[h]=(hd[h]||0)+1;
  localStorage.setItem(key("hour"),JSON.stringify(hd));

  navigator.vibrate?.(20);
  document.getElementById("tapSound").play();
  update();
}

function update(){
  let t=+localStorage.getItem(key("total"))||0;
  document.getElementById("count").innerText=t;

  let day=JSON.parse(localStorage.getItem(key("day"))||"{}");
  let today=day[new Date().toDateString()]||0;

  document.getElementById("stats").innerHTML=
    (lang==="hi"?"‡§Ü‡§ú: ":"Today: ")+today+"<br>"+
    (lang==="hi"?"‡§ï‡•Å‡§≤: ":"Total: ")+t;

  let hd=JSON.parse(localStorage.getItem(key("hour"))||"{}");
  let mh="N/A",mx=0;
  for(let k in hd){ if(hd[k]>mx){mx=hd[k];mh=k+":00";}}
  document.getElementById("activeTime").innerText=mh;

  let fill=690-(t%108)/108*690;
  document.getElementById("circle").style.setProperty("--fill",fill);
}

function toggleLang(){
  lang=lang==="hi"?"sa":"hi";
  document.getElementById("selectText").innerText=
    lang==="hi"?"‡§ú‡§™ ‡§ï‡§æ‡§â‡§Ç‡§ü‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç":"‡§ú‡§™ ‡§ó‡§£‡§ï‡§É";
  document.getElementById("activeLabel").innerText=
    lang==="hi"?"‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§∏‡§Æ‡§Ø":"‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§ï‡§æ‡§≤‡§É";
}

function changeTheme(){
  themeIndex=(themeIndex+1)%themes.length;
  document.body.style.background=themes[themeIndex][0];
  document.documentElement.style.setProperty("--accent",themes[themeIndex][1]);
}
</script>

</body>
</html>
